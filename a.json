[{"$lookup":{"from":"projects","localField":"projects_id","foreignField":"guid","as":"projects_id_data"}},{"$lookup":{"from":"positions","localField":"positions_id","foreignField":"guid","as":"positions_id_data"}},{"$lookup":{"from":"employees","localField":"employee_id","foreignField":"guid","as":"employee_id_data"}},{"$group":{"_id":{"projects_id":"$projects_id","positions_id":"$positions_id"},"data":{"$push":{"guid":"$guid","createdAt":"$createdAt","projects_id":"$projects_id","positions_id":"$positions_id","Data_nachalo":"$Data_nachalo","Tip":"$Tip","Data_zavershenie":"$Data_zavershenie","Mesyats":"$Mesyats","employee_id":"$employee_id","Kolichestvo_chasov_v_denь":"$Kolichestvo_chasov_v_denь","Vsego_chasov":"$Vsego_chasov","CHasy_(_Fakt_)":"$CHasy_(_Fakt_)","Stavka":"$Stavka","Stoimostь":"$Stoimostь","projects_id_data":{"$arrayElemAt":["$projects_id_data",0]},"positions_id_data":{"$arrayElemAt":["$positions_id_data",0]},"employee_id_data":{"$arrayElemAt":["$employee_id_data",0]}}}}},{"$lookup":{"from":"projects","localField":"projects_id","foreignField":"guid","as":"projects_id_data"}},{"$lookup":{"from":"positions","localField":"positions_id","foreignField":"guid","as":"positions_id_data"}},{"$lookup":{"from":"employees","localField":"employee_id","foreignField":"guid","as":"employee_id_data"}},{"$group":{"_id":"$_id.projects_id","data":{"$push":{"positions_id":"$_id.positions_id","group_by_slug":"positions","group_by_type":"LOOKUP","createdAt":{"$arrayElemAt":["$data.createdAt",0]},"Kolichestvo_chasov_v_denь":"$Kolichestvo_chasov_v_denь","Vsego_chasov":"$Vsego_chasov","CHasy_(_Fakt_)":"$CHasy_(_Fakt_)","Stavka":"$Stavka","Stoimostь":"$Stoimostь","data":"$data"}}}},{"$lookup":{"from":"projects","localField":"_id","foreignField":"guid","as":"projects_id_data"}},{"$addFields":{"projects_id":"$_id","group_by_type":"LOOKUP","group_by_slug":"projects","createdAt":{"$arrayElemAt":["$data.createdAt",0]}}},{"$sort":{"createdAt":-1}}]