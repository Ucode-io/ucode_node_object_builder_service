[{"$lookup":{"from":"projects","localField":"projects_id","foreignField":"guid","as":"projects_id_data"}},{"$lookup":{"from":"positions","localField":"positions_id","foreignField":"guid","as":"positions_id_data"}},{"$lookup":{"from":"employees","localField":"employee_id","foreignField":"guid","as":"employee_id_data"}},{"$group":{"_id":{"positions_id":"$positions_id","projects_id":"$projects_id","Tip":"$Tip"},"data":{"$push":{"guid":"$guid","createdAt":"$createdAt","positions_id":"$positions_id","Data_nachalo":"$Data_nachalo","Data_zavershenie":"$Data_zavershenie","Mesyats":"$Mesyats","employee_id":"$employee_id","projects_id_data":{"$first":"$projects_id_data"},"positions_id_data":{"$first":"$positions_id_data"},"employee_id_data":{"$arrayElemAt":["$employee_id_data",0]}}}}},{"$lookup":{"from":"projects","localField":"_id.projects_id","foreignField":"guid","as":"projects_id_data"}},{"$lookup":{"from":"positions","localField":"_id.positions_id","foreignField":"guid","as":"positions_id_data"}},{"$lookup":{"from":"employees","localField":"_id.employee_id","foreignField":"guid","as":"employee_id_data"}},{"$group":{"_id":{"positions_id":"$_id.positions_id","projects_id":"$_id.projects_id"},"data":{"$push":{"label":"$_id.Tip","Tip":"$_id.Tip","group_by_type":"MULTISELECT","createdAt":{"$arrayElemAt":["$data.createdAt",0]},"projects_id_data":"$projects_id_data","positions_id_data":"$positions_id_data","data":"$data"}}}},{"$lookup":{"from":"projects","localField":"_id.projects_id","foreignField":"guid","as":"projects_id_data"}},{"$lookup":{"from":"positions","localField":"_id.positions_id","foreignField":"guid","as":"positions_id_data"}},{"$lookup":{"from":"employees","localField":"_id.employee_id","foreignField":"guid","as":"employee_id_data"}},{"$group":{"_id":"$_id.positions_id","data":{"$push":{"label":"$_id.projects_id","projects_id":"$_id.projects_id","group_by_slug":"projects","group_by_type":"LOOKUP","createdAt":{"$arrayElemAt":["$data.createdAt",0]},"projects_id_data":"$projects_id_data","positions_id_data":"$positions_id_data","data":"$data"}}}},{"$lookup":{"from":"positions","localField":"_id","foreignField":"guid","as":"positions_id_data"}},{"$addFields":{"label":"$_id","positions_id":"$_id","group_by_type":"LOOKUP","group_by_slug":"positions","createdAt":{"$arrayElemAt":["$data.createdAt",0]}}},{"$sort":{"createdAt":-1}}]